<DOCTYPE !HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Flights</title>
  <script src="../js/bootstrap.min.js"></script>
   <link rel="stylesheet" href="../css/bootstrap.min.css">  
  <link href="../css/top-bar.css" rel="stylesheet" type="text/css">
  <link href="../css/outgoing.css" rel="stylesheet" type="text/css">  

</head>
<body>
<div id='nav-bar'>
  <a href='./'> 
  <div id='logo'>
    <img src='../assets/iberia-logo.png'>
  </div>
  </a>
</div>
<div class='content'>
  <h1>Select your flights</h1>
  <div id='outgoing'>
  <h3><img src='../assets/outgoingPlane.png'>Outbound:From {{origin}} to {{dest}} 
  <small>{{oDate}}</small></h3>
  <table class="table table-striped table-hover table-bordered">
  <thead>
    <tr>
      <th></th> 
      <th>Flight Number</th>
      <th>Operated by</th>
      <th>Departure Time</th>
      <th>Arrival Time</th>
      <th>Total Duration</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
  <form ng-model="selectedOutgoingFlight" >
    <tr ng-repeat="flight in outgoingInfo">
      <td><input type="radio" value="{{x}}"></td>
      <td>
        <select ng-model="outgoingCabin">
          <option value="economy">
            Economy: {{flight.eCost}}
          </option>
          <option value="business">
            Business: {{flight.bCost}}
          </option>
        </select>
      </td>
      <td>{{flight.flightNumber}}</td>
      <td>iberia</td>
      <td>{{flight.departureTime}}</td>
      <td>{{flight.arrivalTime}}</td>
      <td>{{flight.departureTime - flight.arrivalTime}}</td>
      <td></td>
    </tr>
  </form>
  </tbody>
</table> 
  </div>
  <div id='return' ng-show="roundTrip">
  <h1>Now select your return flight</h1>
  <h3><img src='../assets/returnPlane.png'>Return: From {{dest}} to {{origin}} 
  <small>{{rDate}}</small></h3>
  <table class="table table-striped table-hover table-bordered">
   <thead>
    <tr>
      <th></th> 
      <th>Flight Number</th>
      <th>Operated by</th>
      <th>Departure Time</th>
      <th>Arrival Time</th>
      <th>Total Duration</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
  <form ng-model="selectedReturnFlight" >
    <tr ng-repeat="flight in returnInfo">
      <td><input type="radio" value="{{x}}"></td>
      <td>
        <select ng-model="returnCabin">
          <option value="economy">
            Economy: {{flight.eCost}}
          </option>
          <option value="business">
            Business: {{flight.bCost}}
          </option>
        </select>
      </td>
      <td>{{flight.flightNumber}}</td>
      <td>iberia</td>
      <td>{{flight.departureTime}}</td>
      <td>{{flight.arrivalTime}}</td>
      <td>{{flight.departureTime - flight.arrivalTime}}</td>
      <td></td>
    </tr>
  </form>
  </tbody>
</table> 
  </div>
  <div id='price'>
  <blockquote>
  <p>Price of your tickets</p>
  <h3>000â‚¬</h3>
</blockquote>
<a href="#" class="btn btn-primary btn-lg">Book Flight</a>
  </div>
</div>
<script>
  var app= angular.module("flight",[]);
  app.controller("flightController", function($scope,$http,flightsSrv){
   $http.get("/api/outgoingInfo").then(function(response){
    $scope.outgoingInfo= response.data.records;

   });
   $http.get("/api/returnInfo").then(function(response){
    $scope.returnInfo= response.data.records;

   });
   $scope.origin= flightsSrv.getSelectedOriginAirport();
   $scope.dest= flightsSrv.getSelectedDestinationAirport();
   $scope.oDate= flightsSrv.getSelectedOutDate();
   $scope.rDate= flightsSrv.getSelectedReturnDate();
  });

</script>
</body>
<html>